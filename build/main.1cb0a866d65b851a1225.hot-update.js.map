{"version":3,"file":"main.1cb0a866d65b851a1225.hot-update.js","sources":["webpack:///./src/pages/TopicSuggestion/index.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport LocationAndCategory from \"./tabs/LocationAndCategory\";\nimport TopicContent from \"./tabs/TopicContent\";\nimport Media from \"./tabs/Media\";\nimport Preview from \"./tabs/Preview\";\nimport Header from \"../../semantics/header\";\nimport Footer from \"../../semantics/footer\";\nimport checkMark from \"../../assets/images/check-mark.png\";\nimport { arrayBufferToBlob } from \"blob-util\";\n\nimport \"./style.scss\";\n\nclass TopicSuggestion extends React.Component {\n  state = {\n    page: 1,\n\n    // location and category\n    categories: [],\n    categoryId: null,\n    lat: \"\",\n    lng: \"\",\n    address: \"\",\n    // topic content\n    topicContent: {\n      title: \"rtrt\",\n      description:\n        \"Lorem ipsum dolor sit amet consectetur adipisicing elit. Atque sint aspernatur, voluptate adipisci ab qui laborum a veniam itaque error tempore sit impedit ullam veritatis? Atque nemo sequi cumque reiciendis.Lorem ipsum dolor sit amet consectetur adipisicing elit. Atque sint aspernatur, voluptate adipisci ab qui laborum a veniam itaque error tempore sit impedit ullam veritatis? Atque nemo sequi cumque reiciendis.\",\n      amount: \"4545\"\n    },\n    // media\n    imagesToPreview: [],\n    imagesToUpload: []\n  };\n\n  componentDidMount() {\n    this.getCategories();\n  }\n\n  getCategories = async () => {\n    this.test();\n    try {\n      const response = await fetch(\"https://2.evollai.com/api/topic/category\", {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Accept-Language\": \"*\"\n        }\n      });\n      const result = await response.json();\n      if (result) {\n        this.setState({\n          categories: result.data\n        });\n      }\n    } catch (error) {\n      // console.log(error);\n    }\n  };\n\n  topicContentFormChange = e => {\n    const { topicContent } = this.state;\n\n    topicContent[e.target.name] = e.target.value;\n    this.setState({ topicContent });\n  };\n\n  moveToTopicContent = () => {\n    const { page, categoryId, address } = this.state;\n\n    this.setState({\n      submittedOne: true\n    });\n\n    if (page === 1 && categoryId && address) {\n      this.setState({\n        page: 2,\n        checkMarkOne: true\n      });\n    }\n  };\n\n  moveToMedia = () => {\n    const {\n      page,\n      topicContent: { title, description }\n    } = this.state;\n\n    this.setState({\n      submittedTwo: true\n    });\n\n    if (page === 2 && title && description.length >= 500) {\n      this.setState({\n        page: 3,\n        checkMarkOne: true,\n        checkMarkTwo: true\n      });\n    }\n  };\n\n  moveToReview = () => {\n    const { page, imagesToPreview } = this.state;\n    this.setState({\n      submittedThree: true\n    });\n\n    if (page === 3 && imagesToPreview.length >= 1) {\n      this.setState({\n        page: 4,\n        checkMarkOne: true,\n        checkMarkTwo: true,\n        checkMarkThree: true\n      });\n    }\n  };\n  test = async () => {\n    //const { topicContent } = this.state;\n    let token = localStorage.getItem(\"authToken\");\n    const formData = new FormData();\n    formData.append(\"address\", \"sss\");\n    formData.append(\"amount\", \"sddd\");\n    formData.append(\"description\", \"sddssdsdds\");\n    formData.append(\"title\", \"sddssdsdsd\");\n    formData.append(\"categoryId\", \"w5535\");\n    formData.append(\"lat\", \"55\");\n    formData.append(\"lng\", \"55\");\n    //for (let i = 0; i < this.state.imagesToUpload.length; i++) {\n    //formData.append(`file`, this.state.imagesToUpload[i]);\n    //}\n    //console.log formData.values());\n    try {\n      const res = await fetch(\"https://2.evollai.com/api/topic\", {\n        method: \"POST\",\n        body: formData,\n        headers: {\n          //\"Content-Type\": \"multipart/form-data\",\n          \"Accept-Language\": \"*\",\n          Authorization: `Bearer ${token}`\n        }\n      });\n      const data = await res.json();\n    } catch (error) {\n      console.log(error);\n    }\n    //https://developer.mozilla.org/en-US/docs/Web/API/FormData\n  };\n  publishHandler = async e => {\n    let { topicContent } = this.state;\n    let token =\n      \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZDgzODc0MzMxOTA1NDUwOWQzMDljMjciLCJyb2xlIjoxLCJwcm92aWRlciI6MSwiaWF0IjoxNTczMjkxMDM5LCJleHAiOjE2MDQzOTUwMzl9.q70aCOw7llwSuYv32GUGTJ6zkmkXlZHjNhAWhjkBSQQ\";\n    const formData = new FormData();\n    formData.append(\"address\", this.state.address);\n    formData.append(\"amount\", topicContent.amount);\n    formData.append(\"description\", topicContent.description);\n    formData.append(\"title\", topicContent.title);\n    formData.append(\"categoryId\", this.state.categoryId);\n    formData.append(\"lat\", this.state.lat);\n    formData.append(\"lng\", this.state.lng);\n    formData.append(`file`, this.state.imagesToUpload[0]);\n\n    try {\n      const res = await fetch(\"https://2.evollai.com/api/topic\", {\n        method: \"POST\",\n        body: formData,\n        headers: {\n          //\"Content-Type\": \"multipart/form-data\",\n          \"Accept-Language\": \"*\",\n          Authorization: `Bearer ${token}`\n        }\n      });\n      const data = await res.json();\n    } catch (error) {\n      console.log(error);\n    }\n\n    const f1 = new FormData();\n    f1.append(\"address\", this.state.address);\n    f1.append(\"amount\", topicContent.amount);\n    f1.append(\"description\", topicContent.description);\n    f1.append(\"title\", topicContent.title);\n    f1.append(\"categoryId\", this.state.categoryId);\n    f1.append(\"lat\", this.state.lat);\n    f1.append(\"lng\", this.state.lng);\n\n    f1.append(`file[]`, this.state.imagesToUpload[0]);\n    try {\n      const res = await fetch(\"https://2.evollai.com/api/topic\", {\n        method: \"POST\",\n        body: f1,\n        headers: {\n          // \"Content-Type\": \"multipart/form-data\",\n          \"Accept-Language\": \"*\",\n          Authorization: `Bearer ${token}`\n        }\n      });\n      const data = await res.json();\n    } catch (error) {\n      console.log(error);\n    }\n    // hamberutyun - is the key, hima noric petqa anenq, nu save reload\n    const f2 = new FormData();\n    f2.append(\"address\", this.state.address);\n    f2.append(\"amount\", topicContent.amount);\n    f2.append(\"description\", topicContent.description);\n    f2.append(\"title\", topicContent.title);\n    f2.append(\"categoryId\", this.state.categoryId);\n    f2.append(\"lat\", this.state.lat);\n    f2.append(\"lng\", this.state.lng);\n    f2.append(`file[]`, this.state.imagesToUpload[0]);\n    try {\n      const res = await fetch(\"https://2.evollai.com/api/topic\", {\n        method: \"POST\",\n        body: f2,\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n          \"Accept-Language\": \"*\",\n          Authorization: `Bearer ${token}`\n        }\n      });\n      const data = await res.json();\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  getImages = (imagesToPreview, imagesToUpload) => {\n    this.setState({ imagesToPreview, imagesToUpload });\n  };\n\n  getAddress = (lat, lng, address) => {\n    this.setState({ lat, lng, address });\n  };\n\n  onCategoryChange = e => {\n    this.setState({\n      categoryId: e.target.value\n    });\n  };\n\n  render() {\n    const {\n      checkMarkOne,\n      checkMarkTwo,\n      checkMarkThree,\n      page,\n      submittedOne,\n      submittedTwo,\n      submittedThree,\n      submittedFour,\n      address,\n      categories,\n      categoryId,\n      topicContent: { title, description, amount },\n      imagesToPreview\n    } = this.state;\n    return (\n      <>\n        <Header />\n        <div className=\"suggest-topic\">\n          <div className=\"tabs\">\n            <ul>\n              <li className={checkMarkOne ? \"done-tab\" : \"active-tab\"}>\n                Category and <br />\n                <span>location</span>\n                {checkMarkOne && <img src={checkMark} alt=\"check-mark\" />}\n              </li>\n              <li className={checkMarkOne && checkMarkTwo ? \"done-tab\" : \"\"}>\n                Topic content\n                {checkMarkOne && checkMarkTwo && (\n                  <img src={checkMark} alt=\"check-mark\" />\n                )}\n              </li>\n              <li\n                className={\n                  checkMarkOne && checkMarkTwo && checkMarkThree\n                    ? \"done-tab\"\n                    : \"\"\n                }\n              >\n                Media\n                {checkMarkOne && checkMarkTwo && checkMarkThree && (\n                  <img src={checkMark} alt=\"check-mark\" />\n                )}\n              </li>\n              <li>Preview</li>\n            </ul>\n          </div>\n          <div className=\"tab-content\">\n            {page === 1 ? (\n              <LocationAndCategory\n                moveNextPage={this.moveToTopicContent}\n                onCategoryChange={this.onCategoryChange}\n                address={address}\n                categories={categories}\n                submitted={submittedOne}\n                categoryId={categoryId}\n                getAddress={this.getAddress}\n              />\n            ) : page === 2 ? (\n              <TopicContent\n                onChange={this.topicContentFormChange}\n                moveNextPage={this.moveToMedia}\n                title={title}\n                description={description}\n                amount={amount}\n                submitted={submittedTwo}\n                typed={this.state.typed}\n              />\n            ) : page === 3 ? (\n              <Media\n                getImages={this.getImages}\n                moveNextPage={this.moveToReview}\n                submitted={submittedThree}\n              />\n            ) : page === 4 ? (\n              <Preview\n                images={imagesToPreview}\n                publish={this.publishHandler}\n                submitted={submittedFour}\n              />\n            ) : (\n              <LocationAndCategory\n                moveNextPage={this.moveToTopicContent}\n                onCategoryChange={this.onCategoryChange}\n                address={address}\n                categories={categories}\n                submitted={submittedOne}\n                categoryId={categoryId}\n                getAddress={this.getAddress}\n              />\n            )}\n          </div>\n        </div>\n        <Footer />\n      </>\n    );\n  }\n}\n\nexport default TopicSuggestion;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAJA;AAMA;AACA;AACA;AAlBA;AACA;;;;;AAwBA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AAFA;AAFA;AACA;AAJA;AAGA;AAHA;AAAA;AACA;AADA;AAUA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;AAhBA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAoBA;AAAA;AAGA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AADA;AACA;AAGA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAKA;AACA;AADA;AACA;AAGA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AADA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAfA;AAAA;AAAA;AAiBA;AACA;AACA;AACA;AACA;AACA;AAHA;AAHA;AACA;AAjBA;AAgBA;AAhBA;AAAA;AACA;AADA;AAyBA;AAzBA;AAAA;AACA;AADA;AAAA;AAAA;AA2BA;AACA;AA5BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;AA8BA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAZA;AAAA;AAAA;AAgBA;AACA;AACA;AACA;AACA;AACA;AAHA;AAHA;AACA;AAhBA;AAeA;AAfA;AAAA;AACA;AADA;AAwBA;AAxBA;AAAA;AACA;AADA;AAAA;AAAA;AA0BA;AACA;AA3BA;AA6BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAtCA;AAAA;AAAA;AAyCA;AACA;AACA;AACA;AACA;AACA;AAHA;AAHA;AACA;AAzCA;AAwCA;AAxCA;AAAA;AACA;AADA;AAiDA;AAjDA;AAAA;AACA;AADA;AAAA;AAAA;AAmDA;AACA;AApDA;AAqDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9DA;AAAA;AAAA;AAiEA;AACA;AACA;AACA;AACA;AACA;AAHA;AAHA;AACA;AAjEA;AAgEA;AAhEA;AAAA;AACA;AADA;AAyEA;AAzEA;AAAA;AACA;AADA;AAAA;AAAA;AA2EA;AACA;AA5EA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;AA8EA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;;;;;;AA5MA;AACA;AACA;;;AA2MA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AADA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAWA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAYA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;AApUA;AACA;AAsUA;;;;A","sourceRoot":""}