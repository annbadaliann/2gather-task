{"version":3,"file":"main.8bd48245499b4dedbbed.hot-update.js","sources":["webpack:///./src/pages/TopicSuggestion/index.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport LocationAndCategory from \"./tabs/LocationAndCategory\";\nimport TopicContent from \"./tabs/TopicContent\";\nimport Media from \"./tabs/Media\";\nimport Preview from \"./tabs/Preview\";\nimport Header from \"../../semantics/header\";\nimport Footer from \"../../semantics/footer\";\nimport checkMark from \"../../assets/images/check-mark.png\";\n\nimport \"./style.scss\";\n\nclass TopicSuggestion extends React.Component {\n  state = {\n    categories: [],\n    page: 1,\n    locationAndCategory: {\n      form: {\n        categories: [],\n        categoryId: null,\n        location: \"\",\n        lat: \"\",\n        lng: \"\"\n      }\n    },\n    topicContent: {\n      form: {\n        title: \"\",\n        description: \"\",\n        amount: \"\"\n      }\n    },\n    media: {\n      form: {\n        file: null\n      }\n    },\n    review: {},\n    checkMarkOne: false,\n    checkMarkTwo: false,\n    checkMarkThree: false,\n    checkMarkFour: false,\n    submittedOne: false,\n    submittedTwo: false,\n    submittedThree: false,\n    submittedFour: false,\n    typed: false\n  };\n\n  componentDidMount() {\n    this.getCategories();\n  }\n\n  firstPageChange = e => {\n    // { target: { name, value } }\n    // this.setState(prevState => ({\n    //   ...prevState,\n    //   locationAndCategory: {\n    //     ...prevState.locationAndCategory,\n    //     form: { ...prevState.locationAndCategory.form, [name]: value }\n    //   }\n    // }));\n\n    const { locationAndCategory } = this.state;\n    locationAndCategory[e.target.name] = e.target.value;\n    this.setState({ locationAndCategory });\n  };\n\n  secondPageChange = ({ target: { name, value } }) => {\n    this.setState(prevState => ({\n      ...prevState,\n      topicContent: {\n        ...prevState.topicContent,\n        form: { ...prevState.topicContent.form, [name]: value }\n      }\n    }));\n\n    // if (e.target.value) {\n    //   this.setState({\n    //     typed: true\n    //   });\n    // }\n  };\n\n  onCategoryChange = value => {\n    this.setState(prevState => ({\n      ...prevState,\n      locationAndCategory: {\n        ...prevState.locationAndCategory,\n        form: { ...prevState.locationAndCategory.form, category: value }\n      }\n    }));\n    console.log(this.state.topicContent.form.title);\n  };\n\n  moveNextPage = pageNum => {\n    const {\n      submittedOne,\n      submittedTwo,\n      submittedThree,\n      submittedFour,\n      page\n    } = this.state;\n\n    const {\n      locationAndCategory: {\n        form: { category, location }\n      },\n      topicContent: {\n        form: { title, description, amount }\n      }\n    } = this.state;\n\n    if (page === 1) {\n      this.setState({\n        submittedOne: true\n      });\n\n      if (submittedOne && location) {\n        this.setState({\n          page: 2,\n          checkMarkOne: true\n        });\n      }\n    }\n\n    if (page === 2) {\n      this.setState({\n        submittedTwo: true\n      });\n\n      if (submittedTwo && title && description.length >= 500 && amount) {\n        this.setState({\n          page: 3,\n          checkMarkOne: true,\n          checkMarkTwo: true\n        });\n      }\n    }\n    // topic content\n\n    // media\n    if (page === 3) {\n      this.setState({\n        submittedThree: true\n      });\n\n      if (submittedThree) {\n        this.setState({\n          page: 4,\n          checkMarkOne: true,\n          checkMarkTwo: true,\n          checkMarkThree: true\n        });\n      }\n    }\n  };\n\n  publishHandler = async e => {\n    console.log(\"publishhh\");\n    const { locationAndCategory, topicContent, media, review } = this.state;\n    let token = localStorage.getItem(\"authToken\");\n    const formData = new FormData();\n    // formData.append(\"address\", loc.address); +\n    // formData.append(\"amount\", topicContent.amount); +\n    // formData.append(\"description\", topicContent.description); +\n    // formData.append(\"title\", topicContent.title); +\n    // formData.append(\"categoryId\", dataCollected.categoryId);\n\n    // for (let i = 0; i < dataCollected.filesToUpload.length; i++) {\n    //   formData.append(\"file\", dataCollected.filesToUpload[i]);\n    // }\n    // formData.append(\"lat\", dataCollected.lat);\n    // formData.append(\"lng\", dataCollected.lng);\n\n    console.log(locationAndCategory.form.location, \"address \");\n    console.log(topicContent.form.title, \"title\");\n    console.log(topicContent.form.description, \"description\");\n    console.log(topicContent.form.amount, \"amount\");\n\n    try {\n      if (token) {\n        const res = await fetch(\"https://2.evollai.com/api/topic\", {\n          method: \"POST\",\n          formData,\n          // body: JSON.stringify({\n          //   osType: 3,\n          //   categoryId: \"1\",\n          //   addres: \"dfads\",\n          //   lat: 1,\n          //   lng: \"1\",\n          //   title: \"dfd\",\n          //   description: \"dfdÃ¥\",\n          //   file: null\n          // }),\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"Accept-Language\": \"*\",\n            language: 1,\n            authToken: token\n          }\n        });\n        const data = await res.json();\n        console.log(data);\n      } else {\n        console.log(\"no token\");\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  getCategories = async () => {\n    const {\n      locationAndCategory: {\n        form: { categories }\n      }\n    } = this.state;\n    try {\n      const response = await fetch(\"https://2.evollai.com/api/topic/category\", {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Accept-Language\": \"*\"\n        }\n      });\n      const result = await response.json();\n      console.log(result, \"categories\");\n      if (result) {\n        this.setState({\n          categories: result.data\n        });\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  sendData = images => {\n    console.log(images);\n\n    this.setState({ imagesToPreview: images });\n  };\n\n  render() {\n    console.log(this.state.imagesToPreview);\n\n    const {\n      form: { location, categories, categoryId }\n    } = this.state.locationAndCategory;\n    const {\n      form: { title, description, amount }\n    } = this.state.locationAndCategory;\n\n    const {\n      checkMarkOne,\n      checkMarkTwo,\n      checkMarkThree,\n      checkMarkFour,\n      page,\n      submittedOne,\n      submittedTwo,\n      submittedThree,\n      submittedFour\n    } = this.state;\n    console.log(this.state.categories, \"catttegories\");\n    return (\n      <>\n        <Header />\n        <div className=\"suggest-topic\">\n          <div className=\"tabs\">\n            <ul>\n              <li>\n                Category and <br />\n                <span>location</span>\n                {checkMarkOne && <img src={checkMark} alt=\"check-mark\" />}\n              </li>\n              <li>\n                Topic content\n                {checkMarkOne && checkMarkTwo && (\n                  <img src={checkMark} alt=\"check-mark\" />\n                )}\n              </li>\n              <li>\n                Media\n                {checkMarkOne && checkMarkTwo && checkMarkThree && (\n                  <img src={checkMark} alt=\"check-mark\" />\n                )}\n              </li>\n              <li>Preview</li>\n            </ul>\n          </div>\n          <div className=\"tab-content\">\n            {page === 1 ? (\n              <LocationAndCategory\n                moveNextPage={() => this.moveNextPage(1)}\n                onChange={this.firstPageChange}\n                onCategoryChange={this.onCategoryChange}\n                location={location}\n                categories={this.state.categories}\n                submitted={submittedOne}\n              />\n            ) : page === 2 ? (\n              <TopicContent\n                onChange={this.secondPageChange}\n                moveNextPage={() => this.moveNextPage(2)}\n                title={title}\n                description={description}\n                amount={amount}\n                submitted={submittedTwo}\n                typed={this.state.typed}\n              />\n            ) : page === 3 ? (\n              <Media\n                sendData={this.sendData}\n                moveNextPage={() => this.moveNextPage(3)}\n                submitted={submittedThree}\n              />\n            ) : (\n              <Preview\n                images={this.state.imagesToPreview}\n                publish={this.publishHandler}\n                submitted={submittedFour}\n              />\n            )}\n          </div>\n        </div>\n        <Footer />\n      </>\n    );\n  }\n}\n\nexport default TopicSuggestion;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AADA;AASA;AACA;AACA;AACA;AACA;AAHA;AADA;AAOA;AACA;AACA;AADA;AADA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjCA;AACA;AAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAWA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAEA;AAFA;AAFA;AAAA;AASA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAEA;AAEA;AAAA;AAAA;AAFA;AAFA;AAAA;AACA;AAMA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAiBA;AACA;AACA;AADA;AACA;AAGA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AAGA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AAGA;AACA;AACA;AADA;AACA;AACA;AADA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;;;;;;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAGA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApBA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAbA;AACA;AAzBA;AAwBA;AAxBA;AAAA;AACA;AADA;AA4CA;AACA;AA7CA;AAAA;AACA;AADA;AA+CA;AACA;AAhDA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAkDA;AACA;AAnDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;AAqDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAHA;AAAA;AAAA;AAQA;AACA;AACA;AACA;AAFA;AAFA;AACA;AARA;AAOA;AAPA;AAAA;AACA;AADA;AAcA;AACA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;AArBA;AAAA;AACA;AADA;AAAA;AAAA;AAsBA;AACA;AAvBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAyBA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;;;;;;AAlMA;AACA;AACA;;;AAiMA;AAAA;AACA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAqBA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAUA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAWA;AACA;AAAA;AAAA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;AA9TA;AACA;AAgUA;;;;A","sourceRoot":""}