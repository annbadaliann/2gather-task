{"version":3,"file":"main.aed2ef7127fba266ac28.hot-update.js","sources":["webpack:///./src/pages/TopicSuggestion/index.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport LocationAndCategory from \"./tabs/LocationAndCategory\";\nimport TopicContent from \"./tabs/TopicContent\";\nimport Media from \"./tabs/Media\";\nimport Preview from \"./tabs/Preview\";\nimport Header from \"../../semantics/header\";\nimport Footer from \"../../semantics/footer\";\nimport checkMark from \"../../assets/images/check-mark.png\";\nimport \"./style.scss\";\n\nclass TopicSuggestion extends React.Component {\n  state = {\n    page: 1,\n    locationAndCategory: {\n      form: {\n        categories: [],\n        location: \"\"\n      }\n    },\n    topicContent: {\n      form: {\n        title: \"\",\n        description: \"\",\n        amount: \"\"\n      }\n    },\n    media: {\n      form: {\n        file: null\n      }\n    },\n    review: {\n      form: {\n        category: null,\n        location: \"\"\n      }\n    }\n  };\n\n  componentDidMount() {\n    this.getCategories();\n  }\n\n  firstPageChange = ({ target: { name, value } }) => {\n    this.setState(prevState => ({\n      ...prevState,\n      locationAndCategory: {\n        ...prevState.locationAndCategory,\n        form: { ...prevState.locationAndCategory.form, [name]: value }\n      }\n    }));\n\n    // const { locationAndCategory } = this.state;\n    // locationAndCategory[e.target.name] = e.target.value;\n    // this.setState({ locationAndCategory });\n  };\n\n  secondPageChange = ({ target: { name, value } }) => {\n    this.setState(prevState => ({\n      ...prevState,\n      topicContent: {\n        ...prevState.topicContent,\n        form: { ...prevState.topicContent.form, [name]: value }\n      }\n    }));\n  };\n\n  onCategoryChange = value => {\n    this.setState(prevState => ({\n      ...prevState,\n      locationAndCategory: {\n        ...prevState.locationAndCategory,\n        form: { ...prevState.locationAndCategory.form, category: value }\n      }\n    }));\n    console.log(this.state.topicContent.form.title);\n  };\n\n  moveNextPage = page => {\n    const {\n      locationAndCategory: { form: category, location },\n      topicContent: { form: title, description, amount }\n    } = this.state;\n    if (category && location && page === 1) {\n      this.setState({\n        page: 2,\n        checkMark: true\n      });\n    } else {\n      console.log(\" fill form\");\n    }\n\n    if (title && description && location && page === 2) {\n      this.setState({\n        page: 3,\n        checkMark: true\n      });\n    } else {\n      console.log(\" fill form\");\n    }\n  };\n\n  publishHandler = async e => {\n    e.preventDefault();\n    console.log(\"publishhh\");\n    const {\n      locationAndCategory: { form: category, location }\n    } = this.state;\n    if (email && password) {\n      try {\n        const res = await fetch(\"https://2.evollai.com/api/topic\", {\n          method: \"POST\",\n          body: JSON.stringify({\n            email,\n            password,\n            osType: \"3\",\n            language: 1\n          }),\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"Accept-Language\": \"*\"\n          }\n        });\n        const data = await res.json();\n        console.log(data);\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  };\n\n  getCategories = async () => {\n    try {\n      const res = await fetch(\"https://2.evollai.com/api/topic/category\", {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Accept-Language\": \"*\"\n        }\n      });\n      const data = await res.json();\n      console.log(data);\n      if (data) {\n        this.setState({\n          categories: data.data\n        });\n      }\n      console.log(this.state.categories);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  render() {\n    const {\n      form: { location, categories }\n    } = this.state.locationAndCategory;\n    const {\n      form: { title, description, amount }\n    } = this.state.locationAndCategory;\n    console.log(categories, \"catttegories\");\n    return (\n      <>\n        <Header />\n        <div className=\"suggest-topic\">\n          <div className=\"tabs\">\n            <ul>\n              <li>\n                Category and <br />\n                location\n                {/* {this.state.page === 2 && <img src={checkMark} alt=\"check-mark\" />} */}\n              </li>\n              <li>\n                Topic content\n                {/* {this.state.page === 3 && <img src={checkMark} alt=\"check-mark\" />} */}\n              </li>\n              <li>\n                Media\n                {/* {this.state.page === 4 && <img src={checkMark} alt=\"check-mark\" />} */}\n              </li>\n              <li>\n                Preview\n                {/* {this.state.page === 4 && <img src={checkMark} alt=\"check-mark\" />} */}\n              </li>\n              ew\n            </ul>\n          </div>\n          <div className=\"tab-content\">\n            {this.state.page === 1 ? (\n              <LocationAndCategory\n                moveNextPage={() => this.moveNextPage(1)}\n                onChange={this.firstPageChange}\n                onCategoryChange={this.onCategoryChange}\n                location={location}\n                categories={categories}\n              />\n            ) : this.state.page === 2 ? (\n              <TopicContent\n                onChange={this.secondPageChange}\n                moveNextPage={() => this.moveNextPage(2)}\n                title={title}\n                description={description}\n                amount={amount}\n              />\n            ) : this.state.page === 3 ? (\n              <Media moveNextPage={() => this.moveNextPage(3)} />\n            ) : (\n              <Preview publish={this.publishHandler} />\n            )}\n          </div>\n        </div>\n        <Footer />\n      </>\n    );\n  }\n}\n\nexport default TopicSuggestion;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AADA;AAMA;AACA;AACA;AACA;AACA;AAHA;AADA;AAOA;AACA;AACA;AADA;AADA;AAKA;AACA;AACA;AACA;AAFA;AADA;AApBA;AACA;AA+BA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAEA;AAFA;AAFA;AAAA;AASA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAEA;AAFA;AAFA;AAAA;AAOA;AACA;AACA;AACA;AAAA;AAEA;AAEA;AAAA;AAAA;AAFA;AAFA;AAAA;AACA;AAMA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;;;;;;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AASA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AAFA;AARA;AACA;AATA;AAQA;AARA;AAAA;AACA;AADA;AAqBA;AACA;AAtBA;AAAA;AACA;AADA;AAAA;AAAA;AAwBA;AACA;AAzBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;AA4BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AAFA;AAFA;AACA;AAHA;AAEA;AAFA;AAAA;AACA;AADA;AASA;AACA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;AAAA;AAhBA;AAAA;AACA;AADA;AAAA;AAAA;AAkBA;AACA;AAnBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;AA7FA;AACA;AACA;;;AAgHA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AAAA;AAAA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;AA5MA;AACA;AA8MA;;;;A","sourceRoot":""}